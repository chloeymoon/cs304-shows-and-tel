{% extends "base.html" %}

{% block content %}
<h1>Add Show</h1>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div id="flashes">
    {% for msg in messages %}
      <p>{{msg}}</p>
    {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<form name="add" id="add" method=POST action={{url_for('add')}}>
    <div class=form-inputs>
        
        <input type="hidden" name="uid" value="{{uid}}">
        <p><label for=title>Title:
            <input type="text" id="title" name="title" size="60"/>
        </label></p>

        <p><label for=creator>Creator: 
            <input type="button" value="Add Creators" onclick="addCreators()" id="cbutton" name="cbutton"/>
            <span id="c_placeholder"></span>
        </label></p>
        
        <p><label for=network>Network:
            <input type="text" id="network" name="network" />
        </label></p>
        
        <p><label for=year>Year Debuted:
            <input type="text" id="year" name="year" />
        </label></p>
        
        <p><label for=genre>Genre:
            <input type="text" id="genre" name="genre" />
        </label></p>
        
        <p><label for=contentwarning>Content Warning: 
            <select name="warning-dropdown" id="warning-dropdown">
                {% for common in commonWarnings %}
                    <option value={{common}}>{{common}}</option>
                {% endfor %}
                {% for warning in contentwarnings %}
                    {% if warning.name not in commonWarnings %}
                        <option value="{{warning.name}}">{{warning.name}}</option>
                    {% endif %}
                {% endfor %}
                <option value="Other">Other (Add a new warning)</option>
                <input type="button" value="Add" id="cwbutton" name="cwbutton"/>
                <br><span id="newwarning_placeholder"></span>
                <span id="cw_placeholder"></span>
            </select>
        </label></p>
        
        <p><label for=script>Link to Script:
            <input type="text" id="script" name="script" size="100"/>
        </label></p>
        
        <p><label for=description>Description:<br>
            <!--<input type="text" id="description" name="description" />-->
            <textarea rows="4" cols="110" name='description'></textarea>
        </label></p>
        

        <p><label for="tags">Tags:
            <select id="tags" name="tags">
                <option>Choose a tag</option>
                <option>Genre</option>
                <option>Pace</option>
                <option>Length</option>
                <option>Type</option>
            </select>
        </label>
        <label for="tag-arg">
            <input type="text" id="tag-arg" name="tag-arg"/>
        </label></p> 
        
        
        <p><button type="submit">Submit</button></p>
    </div>
    
</form>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script language="javascript">

function addNewWarning(){
    newwarning = $('#newcw').val()
    $("#cw_placeholder").append('<ul><input type="text" value="'+newwarning+'" name="cw"/></ul>');
}

$("#cwbutton").on("click", function (e) {
    selected = $("#warning-dropdown option:selected").text()
    if ($("#warning-dropdown option:selected").val()=="Other"){
        $("#newwarning_placeholder")
        .append('<ul>Add a new warning: <input type="text" id="newcw"/>' +
                    '<input type="button" value="Add" onclick="addNewWarning()" id="newcwbutton" name="newcwbutton"/></ul>');
    } else {
        $("#cw_placeholder").append('<ul><input type="text" id="cw" value="'+selected+'" name="cw"/></ul>');
    }
});

// $("newcwbutton").on("click", function (e) {
//     newwarning = $('#newcw').val()
//     $("#cw_placeholder").append('<ul><input type="text" id="cw" value="'+newwarning+'" name="cw"/></ul>');
// })

function addCreators() {
	$("#c_placeholder").append('<input type="text" id="creator" name="creator"/>');
}

</script>

{% endblock %}

